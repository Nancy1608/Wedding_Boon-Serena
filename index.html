
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wedding Guest List</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        background-color: white;
        color: #333;
    }
    header {
        padding: 10px;
        background: white;
        position: sticky;
        top: 0;
        z-index: 100;
        border-bottom: 1px solid #ddd;
    }
    .top-row, .second-row {
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
        margin-bottom: 5px;
    }
    button {
        padding: 8px 12px;
        border: none;
        cursor: pointer;
        border-radius: 5px;
        font-size: 14px;
    }
    .filter-btn {
        background-color: gold;
        color: black;
    }
    .reset-btn {
        background-color: red;
        color: white;
    }
    .revert-btn {
        background-color: #ccc;
    }
    input[type="text"] {
        padding: 8px;
        border-radius: 5px;
        border: 1px solid #ccc;
        flex: 1;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }
    th {
        background-color: #f5f5f5;
    }
    .card {
        border: 1px solid #ddd;
        padding: 10px;
        border-radius: 5px;
        margin-bottom: 10px;
        background-color: white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    .status-btn {
        padding: 5px 10px;
        border-radius: 5px;
        border: none;
        cursor: pointer;
    }
    .arrived { background-color: #4CAF50; color: white; }
    .pending { background-color: #f44336; color: white; }

    @media (min-width: 768px) {
        .card-view { display: none; }
    }
    @media (max-width: 767px) {
        table { display: none; }
    }
</style>
</head>
<body>

<header>
    <div class="top-row">
        <button class="filter-btn" onclick="filterGuests('all')">All</button>
        <button class="filter-btn" onclick="filterGuests('arrived')">Arrived</button>
        <button class="filter-btn" onclick="filterGuests('pending')">Pending</button>
        <div id="totalPax" style="margin-left:auto; font-weight:bold;">Total Pax: 0</div>
    </div>
    <div class="second-row">
        <input type="text" id="searchInput" placeholder="Search guest or table..." oninput="searchGuests()">
        <button class="reset-btn" onclick="resetSearch()">X</button>
        <button class="revert-btn" onclick="revertAll()">Revert All</button>
    </div>
</header>

<main>
    <table id="guestTable">
        <thead>
            <tr><th>Table No</th><th>Guest Name</th><th>No of Pax</th><th>Status</th><th>Action</th></tr>
        </thead>
        <tbody></tbody>
    </table>
    <div id="guestCards" class="card-view"></div>
</main>

<script>
const guestData = [
    {table:20, pax:4, name:"Boon's Friends"},
    {table:20, pax:6, name:"Serena's Friends"},
    {table:14, pax:2, name:"Ming Ming & Spouse"},
    {table:14, pax:2, name:"Lee Kah Yee & Spouse"},
    {table:14, pax:1, name:"Ming Mingâ€™s Aunty"},
    {table:14, pax:1, name:"Mrs Lim Tua Lek"},
    {table:14, pax:3, name:"Nicole Yap & Family"},
    {table:8, pax:2, name:"Mr & Mrs Soon Chin Hoon"},
    {table:8, pax:2, name:"Ong Ting Ting & Spouse"}
];

let guestStatus = JSON.parse(localStorage.getItem('guestStatus')) || {};

function renderGuests(filter='all', search='') {
    const tbody = document.querySelector('#guestTable tbody');
    const cardContainer = document.getElementById('guestCards');
    tbody.innerHTML = '';
    cardContainer.innerHTML = '';
    let totalPax = 0;

    guestData.forEach(g => {
        const status = guestStatus[g.name] || 'pending';
        if (filter !== 'all' && status !== filter) return;
        if (search && !g.name.toLowerCase().includes(search) && g.table.toString() !== search) return;
        totalPax += g.pax;

        // Table row
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${g.table}</td>
                        <td>${g.name} (Pax: ${g.pax})</td>
                        <td>${g.pax}</td>
                        <td>${status.charAt(0).toUpperCase() + status.slice(1)}</td>
                        <td><button class="status-btn ${status}" onclick="toggleStatus('${g.name}')">${status === 'pending' ? 'Arr' : 'Pend'}</button></td>`;
        tbody.appendChild(tr);

        // Mobile card
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `<strong>Table ${g.table}</strong><br>${g.name} (Pax: ${g.pax})<br>
                          <button class="status-btn ${status}" onclick="toggleStatus('${g.name}')">${status === 'pending' ? 'Arr' : 'Pend'}</button>`;
        cardContainer.appendChild(card);
    });
    document.getElementById('totalPax').innerText = `Total Pax: ${totalPax}`;
}

function filterGuests(status) {
    currentFilter = status;
    renderGuests(status, document.getElementById('searchInput').value.toLowerCase());
}

function searchGuests() {
    renderGuests(currentFilter, document.getElementById('searchInput').value.toLowerCase());
}

function resetSearch() {
    document.getElementById('searchInput').value = '';
    renderGuests(currentFilter);
}

function toggleStatus(name) {
    guestStatus[name] = guestStatus[name] === 'arrived' ? 'pending' : 'arrived';
    localStorage.setItem('guestStatus', JSON.stringify(guestStatus));
    renderGuests(currentFilter, document.getElementById('searchInput').value.toLowerCase());
}

function revertAll() {
    guestStatus = {};
    localStorage.removeItem('guestStatus');
    renderGuests(currentFilter);
}

let currentFilter = 'all';
renderGuests();
</script>

</body>
</html>
