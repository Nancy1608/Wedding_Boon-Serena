
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wedding Guest List</title>
<style>
    body { font-family: Arial, sans-serif; background: #fff; color: #333; margin: 0; padding: 0; }
    header { position: sticky; top: 0; background: #fff; z-index: 1000; border-bottom: 1px solid #ccc; }
    .top-row, .second-row { display: flex; flex-wrap: wrap; align-items: center; padding: 8px; gap: 6px; }
    button { padding: 6px 12px; border: none; border-radius: 6px; background: #007bff; color: white; cursor: pointer; }
    button:hover { background: #0056b3; }
    button.reset { background: #dc3545; }
    input[type="text"] { padding: 6px; flex: 1; border: 1px solid #ccc; border-radius: 6px; }
    .guest-table { width: 100%; border-collapse: collapse; margin-top: 8px; }
    .guest-table th, .guest-table td { padding: 8px; border-bottom: 1px solid #ccc; text-align: left; }
    .cards { display: none; gap: 8px; flex-wrap: wrap; padding: 8px; }
    .card { border: 1px solid #ccc; border-radius: 8px; padding: 8px; background: #fafafa; width: calc(50% - 8px); box-sizing: border-box; }
    .status-arrived { color: green; font-weight: bold; }
    .status-pending { color: orange; font-weight: bold; }
    @media (max-width: 768px) {
        .guest-table { display: none; }
        .cards { display: flex; }
        .card { width: 100%; }
        .top-row { justify-content: space-between; }
        .second-row { width: 100%; }
    }
</style>
</head>
<body>

<header>
    <div class="top-row">
        <button onclick="filterGuests('all')">All</button>
        <button onclick="filterGuests('arrived')">Arrived</button>
        <button onclick="filterGuests('pending')">Pending</button>
        <span id="totalPax" style="margin-left:auto; font-weight:bold;">Total Pax: 0</span>
    </div>
    <div class="second-row">
        <input type="text" id="searchBox" placeholder="Search guest..." oninput="renderGuests()">
        <button class="reset" onclick="document.getElementById('searchBox').value=''; renderGuests()">X</button>
        <button onclick="revertAll()">Revert All</button>
    </div>
</header>

<table class="guest-table">
    <thead>
        <tr>
            <th>Table</th>
            <th>Guest Name</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody id="guestList"></tbody>
</table>

<div class="cards" id="guestCards"></div>

<script>
const guests = [
    { table: 20, pax: 4, guestName: "Boon's Friends" },
    { table: 20, pax: 6, guestName: "Serena's Friends" },
    { table: 14, pax: 2, guestName: "Ming Ming & Spouse" },
    { table: 14, pax: 2, guestName: "Lee Kah Yee & Spouse" },
    { table: 14, pax: 1, guestName: "Ming Ming’s Aunty" },
    { table: 14, pax: 1, guestName: "Mrs Lim Tua Lek" },
    { table: 14, pax: 3, guestName: "Nicole Yap & Family" },
    { table: 8, pax: 2, guestName: "Mr & Mrs Soon Chin Hoon" },
    { table: 8, pax: 2, guestName: "Ong Ting Ting & Spouse" },
    { table: 8, pax: 2, guestName: "Mr & Mrs Jesse Jee" },
    { table: 8, pax: 2, guestName: "Mr & Mrs Lee Peng Koon" },
    { table: 8, pax: 2, guestName: "Mr & Mrs Loh Hoi Yew" },
    { table: 2, pax: 2, guestName: "Kian Mun & Daughter" },
    { table: 2, pax: 1, guestName: "Amy" },
    { table: 2, pax: 3, guestName: "Benny & Family" },
    { table: 2, pax: 4, guestName: "Victor & Family" },
    { table: 21, pax: 1, guestName: "Gurdeu" },
    { table: 21, pax: 4, guestName: "Jasvin, Annish & Family" },
    { table: 21, pax: 3, guestName: "Sukhvinder & Family" },
    { table: 21, pax: 2, guestName: "Dato’ & Datin Jesbil" },
    { table: 15, pax: 2, guestName: "Mr & Mrs Chan (Joo Heong)" },
    { table: 15, pax: 1, guestName: "Ricky Chan" },
    { table: 15, pax: 2, guestName: "Liew Li Fong & Spouse" },
    { table: 15, pax: 2, guestName: "Tan Ai Tiang & Spouse" },
    { table: 15, pax: 1, guestName: "Kevin Lau" },
    { table: 15, pax: 2, guestName: "Mr & Mrs Wong Yok Heng" },
    { table: 9, pax: 10, guestName: "Seah Kiat Seng & Family" },
    { table: 3, pax: 3, guestName: "Lay Weng & Family" },
    { table: 3, pax: 6, guestName: "Carmen & Family" },
    { table: 3, pax: 1, guestName: "Nancy" },
    { table: 22, pax: 2, guestName: "Mr & Mrs Loh Weng Cheong" },
    { table: 22, pax: 2, guestName: "Mr & Mrs Goh Keat Hoe" },
    { table: 22, pax: 2, guestName: "Mr & Mrs Eric Woh Pei Su" },
    { table: 22, pax: 2, guestName: "Mr & Mrs Francis Wong" },
    { table: 22, pax: 1, guestName: "Lim Hong Guan" },
    { table: 22, pax: 1, guestName: "Ang Sing Hai" },
    { table: 16, pax: 2, guestName: "Mr & Mrs Sunny Phang" },
    { table: 16, pax: 1, guestName: "Ms Eng Hui Mun" },
    { table: 16, pax: 1, guestName: "Ms Tan Yoke Lan" },
    { table: 16, pax: 2, guestName: "Mr & Mrs Ng Kim Siah" },
    { table: 16, pax: 2, guestName: "Mr & Mrs Yap Meow Sing" },
    { table: 16, pax: 2, guestName: "Mr & Mrs Lim Tow Poe" },
    { table: 10, pax: 1, guestName: "Ms Soo Kah Huey" },
    { table: 10, pax: 2, guestName: "Dato’ & Datin Soo Kah Eng" },
    { table: 10, pax: 2, guestName: "Dato’ & Datin Lew Wai Koung" },
    { table: 10, pax: 1, guestName: "Datin Toh Bee Huan" },
    { table: 10, pax: 2, guestName: "Mr & Mrs Soo Hock Chuan" },
    { table: 10, pax: 1, guestName: "Mdm Lau Yoke Eng" },
    { table: 10, pax: 1, guestName: "Mdm Isabelle Fam" },
    { table: 4, pax: 4, guestName: "Shirley & Family" },
    { table: 4, pax: 1, guestName: "Annie" },
    { table: 4, pax: 1, guestName: "Ruby" },
    { table: 4, pax: 2, guestName: "Amy Tiew & Ah Ngoh" },
    { table: 4, pax: 2, guestName: "Mr & Mrs Sunny Tiew" }
];

let statusMap = JSON.parse(localStorage.getItem('guestStatus')) || {};

function renderGuests(filter = currentFilter) {
    const searchValue = document.getElementById('searchBox').value.toLowerCase();
    const guestList = document.getElementById('guestList');
    const guestCards = document.getElementById('guestCards');
    guestList.innerHTML = '';
    guestCards.innerHTML = '';
    let totalPax = 0;
    guests.forEach(guest => {
        const status = statusMap[guest.guestName] || 'pending';
        if ((filter === 'arrived' && status !== 'arrived') ||
            (filter === 'pending' && status !== 'pending')) return;
        if (!guest.guestName.toLowerCase().includes(searchValue) &&
            !String(guest.table).includes(searchValue)) return;
        totalPax += guest.pax;
        const row = document.createElement('tr');
        row.innerHTML = `<td>${guest.table}</td><td>${guest.guestName} (Pax: ${guest.pax})</td>
                         <td class="status-${status}">${status}</td>
                         <td><button onclick="updateStatus('${guest.guestName}')">Arrived</button></td>`;
        guestList.appendChild(row);
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `<div><strong>Table ${guest.table}</strong></div>
                          <div>${guest.guestName} (Pax: ${guest.pax})</div>
                          <div class="status-${status}">${status}</div>
                          <button onclick="updateStatus('${guest.guestName}')">Arrived</button>`;
        guestCards.appendChild(card);
    });
    document.getElementById('totalPax').textContent = `Total Pax: ${totalPax}`;
}

function updateStatus(name) {
    statusMap[name] = 'arrived';
    localStorage.setItem('guestStatus', JSON.stringify(statusMap));
    renderGuests();
}

function revertAll() {
    statusMap = {};
    localStorage.removeItem('guestStatus');
    renderGuests();
}

let currentFilter = 'all';
function filterGuests(type) {
    currentFilter = type;
    renderGuests();
}

renderGuests();
</script>

</body>
</html>
